<template>
    <lightning-card>
        <div class="container">
            <div class="book-list">
                <template if:true={books}>
                    <div class="slds-grid slds-wrap">
                        <template for:each={books} for:item="book">
                            <div key={book.book.Id} class="slds-col slds-size_1-of-4 slds-p-around_x-small">
                                <c-book-tile
                                    book-id={book.book.Id}
                                    book-name={book.book.Name}
                                    book-image-url={book.imageUrl}
                                    price={book.book.Price__c}
                                    avg-rating={book.book.Average_Rating__c}
                                    review-count={book.book.No_of_Reviews__c}
                                    onbookselect={handleBookSelect}
                                    onaddtocart={handleAddToCart}
                                    onaddtowishlist={handleAddToWishlist}>
                                </c-book-tile>
                            </div>
                        </template>
                    </div>
                </template>
                <template if:true={error}>
                    <p>{error}</p>
                </template>
            </div>
            
            <!-- BookDetail component will slide over this book-list -->
            <div class="book-detail" if:true={isBookDetailVisible}>
                <c-book-detail 
                    record-id={selectedBookId} 
                    onbacktolist={handleBackToList}>
                </c-book-detail>
            </div>
        </div>
    </lightning-card>
</template>
